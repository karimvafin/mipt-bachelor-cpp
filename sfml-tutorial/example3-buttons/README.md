# –ü—Ä–∏–º–µ—Ä 3: –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~20 –º–∏–Ω—É—Ç

## –¶–µ–ª—å

–ù–∞—É—á–∏—Ç—å—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–æ–±—ã—Ç–∏–π –º—ã—à–∏, –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –∏ –Ω–∞–∂–∞—Ç–∏–∏.

## –ß—Ç–æ –≤—ã –∏–∑—É—á–∏—Ç–µ

- –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ Button
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –º—ã—à–∏
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ø–∞–¥–∞–Ω–∏—è —Ç–æ—á–∫–∏ –≤ –æ–±–ª–∞—Å—Ç—å (hit testing)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ callback —Ñ—É–Ω–∫—Ü–∏–π
- –†–∞–±–æ—Ç–∞ —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö

## –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Å–∞ Button

–ö–ª–∞—Å—Å `Button` —Å–æ–¥–µ—Ä–∂–∏—Ç:
- –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (`sf::RectangleShape`)
- –¢–µ–∫—Å—Ç (`sf::Text`)
- –°–æ—Å—Ç–æ—è–Ω–∏—è (Normal, Hover, Pressed)
- Callback —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–∂–∞—Ç–∏–π

### –®–∞–≥ 2: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π

```cpp
enum class State
{
    Normal,   // –û–±—ã—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    Hover,    // –ù–∞–≤–µ–¥–µ–Ω–∏–µ –º—ã—à–∏
    Pressed   // –ù–∞–∂–∞—Ç–∞
};
```

### –®–∞–≥ 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –º—ã—à–∏

```cpp
void Button::handleEvent(const sf::Event& event, const sf::RenderWindow& window)
{
    // –ü–æ–ª—É—á–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –º—ã—à–∏
    sf::Vector2i mousePos = sf::Mouse::getPosition(window);
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –º—ã—à—å –Ω–∞–¥ –∫–Ω–æ–ø–∫–æ–π
    bool mouseOver = contains(mousePosF);
    
    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏—è
    if (event.is<sf::Event::MouseMoved>())
    {
        // –ò–∑–º–µ–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
    }
    else if (event.is<sf::Event::MouseButtonPressed>())
    {
        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –Ω–∞–∂–∞—Ç–∏–µ
    }
    else if (event.is<sf::Event::MouseButtonReleased>())
    {
        // –í—ã–∑—ã–≤–∞–µ–º callback –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–∞–Ω–∏–∏
    }
}
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –æ–±–ª–∞—Å—Ç—å

```cpp
bool Button::contains(const sf::Vector2f& point) const
{
    sf::FloatRect bounds = m_shape.getGlobalBounds();
    return bounds.contains(point);
}
```

### –®–∞–≥ 5: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ callback —Ñ—É–Ω–∫—Ü–∏–π

```cpp
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ callback
button.setOnClick([]() {
    std::cout << "–ö–Ω–æ–ø–∫–∞ –Ω–∞–∂–∞—Ç–∞!" << std::endl;
});

// –ò–ª–∏ —Å –∑–∞—Ö–≤–∞—Ç–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
int counter = 0;
button.setOnClick([&counter]() {
    counter++;
    std::cout << "–°—á–µ—Ç—á–∏–∫: " << counter << std::endl;
});
```

### –®–∞–≥ 6: –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞

```cpp
sf::Vector2f Button::calculateTextPosition() const
{
    sf::FloatRect textBounds = m_text.getLocalBounds();
    sf::Vector2f shapePos = m_shape.getPosition();
    sf::Vector2f shapeSize = m_shape.getSize();
    
    // –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
    float x = shapePos.x + (shapeSize.x - textBounds.width) / 2.0f - textBounds.left;
    float y = shapePos.y + (shapeSize.y - textBounds.height) / 2.0f - textBounds.top;
    
    return sf::Vector2f(x, y);
}
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
example3-buttons/
‚îú‚îÄ‚îÄ main.cpp           # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å –ø—Ä–∏–º–µ—Ä–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ Button.h           # –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª –∫–ª–∞—Å—Å–∞ Button
‚îú‚îÄ‚îÄ Button.cpp         # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ Button
‚îú‚îÄ‚îÄ CMakeLists.txt
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ resources/
    ‚îî‚îÄ‚îÄ font.ttf       # –®—Ä–∏—Ñ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

## –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
mkdir build
cd build
cmake ..
make
./Example3_Buttons
```

## –ó–∞–≥—Ä—É–∑–∫–∞ —à—Ä–∏—Ñ—Ç–∞

SFML –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —à—Ä–∏—Ñ—Ç–æ–≤. –í–∞–º –Ω—É–∂–Ω–æ:

1. **–°–∫–∞—á–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —à—Ä–∏—Ñ—Ç** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å [Google Fonts](https://fonts.google.com/))
2. **–ü–æ–º–µ—Å—Ç–∏—Ç—å –≤ `resources/font.ttf`**
3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π —à—Ä–∏—Ñ—Ç (–ø—É—Ç—å —É–∫–∞–∑–∞–Ω –≤ –∫–æ–¥–µ)

**–ë–µ–∑ —à—Ä–∏—Ñ—Ç–∞:** –ö–Ω–æ–ø–∫–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞ (—Ç–æ–ª—å–∫–æ —Ü–≤–µ—Ç–Ω—ã–µ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏).

## –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### Hit Testing

–ü—Ä–æ–≤–µ—Ä–∫–∞, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ —Ç–æ—á–∫–∞ (–ø–æ–∑–∏—Ü–∏—è –º—ã—à–∏) –≤–Ω—É—Ç—Ä–∏ –æ–±–ª–∞—Å—Ç–∏ –∫–Ω–æ–ø–∫–∏:

```cpp
bool contains(const sf::Vector2f& point) const
{
    return m_shape.getGlobalBounds().contains(point);
}
```

### Callback —Ñ—É–Ω–∫—Ü–∏–∏

–ü–æ–∑–≤–æ–ª—è—é—Ç –∫–Ω–æ–ø–∫–µ –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –∫–æ–¥ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏:

```cpp
std::function<void()> m_onClick;

void setOnClick(std::function<void()> callback)
{
    m_onClick = callback;
}

// –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏:
if (m_onClick)
{
    m_onClick();
}
```

### –°–æ—Å—Ç–æ—è–Ω–∏—è UI

–ö–Ω–æ–ø–∫–∞ –º–µ–Ω—è–µ—Ç –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è:
- **Normal** - –æ–±—ã—á–Ω—ã–π —Ü–≤–µ—Ç
- **Hover** - —Å–≤–µ—Ç–ª–µ–µ (–º—ã—à—å –Ω–∞–¥ –∫–Ω–æ–ø–∫–æ–π)
- **Pressed** - —Ç–µ–º–Ω–µ–µ (–∫–Ω–æ–ø–∫–∞ –Ω–∞–∂–∞—Ç–∞)

## –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

1. **–î–æ–±–∞–≤—å—Ç–µ –∑–≤—É–∫**: –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ –∑–≤—É–∫–æ–≤–æ–π —ç—Ñ—Ñ–µ–∫—Ç
2. **–ê–Ω–∏–º–∞—Ü–∏—è**: –î–æ–±–∞–≤—å—Ç–µ –ø–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
3. **–ò–∫–æ–Ω–∫–∏**: –î–æ–±–∞–≤—å—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∏–∫–æ–Ω–∫—É –Ω–∞ –∫–Ω–æ–ø–∫–µ
4. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏**: –°–æ–∑–¥–∞–π—Ç–µ –º–µ–Ω—é —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö
5. **–ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è**: –î–æ–±–∞–≤—å—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ —Å –ø–æ–º–æ—â—å—é Tab

## –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –¢–µ–∫—Å—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏

–í–º–µ—Å—Ç–æ `sf::RectangleShape` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `sf::Sprite`:

```cpp
sf::Sprite m_sprite;
// –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ–∫—Å—Ç—É—Ä—É –∫–Ω–æ–ø–∫–∏
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–µ–∫—Å—Ç—É—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
```

### –ê–Ω–∏–º–∞—Ü–∏—è

```cpp
// –ü–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞
sf::Color currentColor = m_shape.getFillColor();
sf::Color targetColor = m_hoverColor;
// –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É currentColor –∏ targetColor
```

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è –≤—Å–µ—Ö —Ç—Ä–µ—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –≤—ã –º–æ–∂–µ—Ç–µ:

- ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ UI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥
- ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ü–æ–Ω–∏–º–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏–≥—Ä–æ–≤—ã—Ö —Ü–∏–∫–ª–æ–≤

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π –≤—Å–µ –∏–∑—É—á–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏!

---

**–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!** –í—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏ –±–∞–∑–æ–≤—ã–π —Ç—É—Ç–æ—Ä–∏–∞–ª –ø–æ SFML! üéâ
