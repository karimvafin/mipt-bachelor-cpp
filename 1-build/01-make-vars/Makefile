# Компилятор C++.
CXX := g++
# Флаги компиляции: стандарт, оптимизация, предупреждения.
CXXFLAGS := -std=c++20 -O2 -Wall -Wextra -pedantic
# Имя итогового исполняемого файла.
TARGET := calc
# Список исходных файлов.
SRCS := main.cpp util.cpp
# Список объектных файлов на основе SRCS.
OBJS := $(SRCS:.cpp=.o) # main.o util.o

# Правило линковки из объектных файлов.
$(TARGET): $(OBJS)
	# Линковка всех объектов в один бинарник.
	$(CXX) $(CXXFLAGS) -o $@ $^

# Шаблонное правило компиляции .cpp в .o.
%.o: %.cpp
	# Компиляция одного исходника в объектный файл.
	$(CXX) $(CXXFLAGS) -c -o $@ $<

# Объявление фиктивных целей.
.PHONY: clean
# Очистка артефактов сборки.
clean:
	# Удаление бинарника и объектов.
	rm -f $(TARGET) $(OBJS)
